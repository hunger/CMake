[
{ "message": "Testing basic protocol:" },

{ "handshake": {"major": 0} },

{ "message": "Testing uninitialized state" },

{ "send": {"type":"foobar"} },
{ "error": {"type":"foobar","message":"Unknown command!"} },

{ "send": {"type":"version"} },
{ "reply": {"type":"version"} },

{ "send": {"type":"initialize"} },
{ "error": {"type":"initialize","message":"\"buildDirectory\" may not be unset."} },

{ "send": {"type":"buildsystem"} },
{ "error": {"type":"buildsystem","message":"Not initialized yet."} },

{ "send": {"type":"targetInfo"} },
{ "error": {"type":"targetInfo","message":"Not initialized yet."} },

{ "send": {"type":"fileInfo"} },
{ "error": {"type":"fileInfo","message":"Not initialized yet."} },

{ "send": {"type":"content"} },
{ "error": {"type":"content","message":"Not initialized yet."} },

{ "send": {"type":"contextualHelp"} },
{ "error": {"type":"contextualHelp","message":"Not initialized yet."} },

{ "send": {"type":"contentDiff"} },
{ "error": {"type":"contentDiff","message":"Not initialized yet."} },

{ "send": {"type":"codeComplete"} },
{ "error": {"type":"codeComplete","message":"Not initialized yet."} },

{ "send": {"type":"contextWriters"} },
{ "error": {"type":"contextWriters","message":"Not initialized yet."} },

{ "send": {"type":"parse"} },
{ "error": {"type":"parse","message":"\"path\" may not be unset."} },

{ "send": {"type":"parse","path":"/DOES/NOT/EXIST/CMakeLists.txt"} },
{ "error": {"type":"parse","message":"Can not open file /DOES/NOT/EXIST/CMakeLists.txt"} },

{ "send": {"type":"parse","path":"%SOURCEDIR%/buildsystem1/CMakeLists.txt"} },
{ "reply": {"type":"parse"} },

{ "message": "Initializing" },

{ "send": {"type":"initialize","buildDirectory":"%BUILDDIR%/buildsystem1","cookie":"TEST_INIT"} },
{ "progress": {"type":"initialize","cookie":"TEST_INIT","current":0,"message":"initialized"} },
{ "progress": {"type":"initialize","cookie":"TEST_INIT","current":1,"message":"configured"} },
{ "progress": {"type":"initialize","cookie":"TEST_INIT","current":2,"message":"computed"} },
{ "progress": {"type":"initialize","cookie":"TEST_INIT","current":3,"message":"done"} },
{ "recv": {"result":{"project":"buildsystem1","buildDirectory":"%BUILDDIR%/buildsystem1","sourceDirectory":"%SOURCEDIR%/buildsystem1"},"type":"reply","inReplyTo":"initialize","cookie":"TEST_INIT"} },

{ "message": "Initialized" },

{ "send": {"type":"foobar"} },
{ "error": {"type":"foobar","message":"Unknown command!"} },

{ "send": {"type":"version"} },
{ "reply": {"type":"version"} },

{ "send": {"type":"initialize"} },
{ "error": {"type":"initialize","message":"Already initialized."} },

{ "send": {"type":"buildsystem"} },
{ "reply": {"type":"buildsystem"} },

{ "send": {"type":"targetInfo"} },
{ "error": {"type":"targetInfo","message":"\"target\" may not be unset."} },

{ "send": {"type":"fileInfo"} },
{ "error": {"type":"fileInfo","message":"\"target\" may not be unset."} },

{ "send": {"type":"content"} },
{ "error": {"type":"content","message":"\"path\" may not be unset."} },

{ "send": {"type":"contextualHelp"} },
{ "error": {"type":"contextualHelp","message":"\"line\" must be a positive integer."} },

{ "send": {"type":"contentDiff"} },
{ "error": {"type":"contentDiff","message":"\"line1\" must be a positive integer."} },

{ "send": {"type":"codeComplete"} },
{ "error": {"type":"codeComplete","message":"\"line\" must be a positive integer."} },

{ "send": {"type":"contextWriters"} },
{ "error": {"type":"contextWriters","message":"\"line\" must be a positive integer."} },

{ "send": {"type":"parse"} },
{ "error": {"type":"parse","message":"\"path\" may not be unset."} },

{ "send": {"type":"parse","path":"/DOES/NOT/EXIST/CMakeLists.txt"} },
{ "error": {"type":"parse","message":"Can not open file /DOES/NOT/EXIST/CMakeLists.txt"} },

{ "send": {"type":"parse","path":"%SOURCEDIR%/buildsystem1/CMakeLists.txt"} },
{ "reply": {"type":"parse"} },

{ "message": "Everything ok." }
]
