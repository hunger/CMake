[
{ "message": "Testing basic message handling:" },

{ "sendRaw": "Sometext"},
{ "recv": {"cookie":"","errorMessage":"Failed to parse JSON input.","inResponseTo":"","type":"error"} },

{ "message": "Testing invalid json input"},
{ "send": { "test": "sometext" } },
{ "recv": {"cookie":"","errorMessage":"No type given in request.","inResponseTo":"","type":"error"} },

{ "send": {"test": "sometext","cookie":"monster"} },
{ "recv": {"cookie":"monster","errorMessage":"No type given in request.","inResponseTo":"","type":"error"} },

{ "message": "Testing handshake" },
{ "send": {"type": "sometype","cookie":"monster2"} },
{ "recv": {"cookie":"monster2","errorMessage":"Waiting for type \"handshake\".","inResponseTo":"sometype","type":"error"} },

{ "send": {"type": "handshake"} },
{ "recv": {"cookie":"","errorMessage":"\"protocolVersion\" is required for \"handshake\".","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","foo":"bar"} },
{ "recv": {"cookie":"","errorMessage":"\"protocolVersion\" is required for \"handshake\".","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":"bar"} },
{ "recv": {"cookie":"","errorMessage":"\"protocolVersion\" must be a JSON object.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{}} },
{ "recv": {"cookie":"","errorMessage":"\"major\" must be set and an integer.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":"foo"}} },
{ "recv": {"cookie":"","errorMessage":"\"major\" must be set and an integer.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":0, "minor":"foo"}} },
{ "recv": {"cookie":"","errorMessage":"\"minor\" must be unset or an integer.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":-1, "minor":-1}} },
{ "recv": {"cookie":"","errorMessage":"\"major\" must be >= 0.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":10, "minor":-1}} },
{ "recv": {"cookie":"","errorMessage":"\"minor\" must be >= 0 when set.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":10000}} },
{ "recv": {"cookie":"","errorMessage":"Protocol version not supported.","inResponseTo":"handshake","type":"error"} },

{ "send": {"type": "handshake","protocolVersion":{"major":0, "minor":10000}} },
{ "recv": {"cookie":"","errorMessage":"Protocol version not supported.","inResponseTo":"handshake","type":"error"} },

{ "send": {"cookie":"zimtstern","type": "handshake","protocolVersion":{"major":0}} },
{ "recv": {"cookie":"zimtstern","inResponseTo":"handshake","type":"reply"} },

{ "message": "Everything ok." }
]
